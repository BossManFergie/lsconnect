function is_empty(a){return null==a.match(/\S/)}function initialize(){$("body").tooltip({selector:'[data-toggle="tooltip"], [data-tooltip=tooltip]'}),autosize($(".js_autosize")),$(".js_moment").each(function(){var a=$(this),b=a.data("time"),c=$("html").attr("lang")||"en-us",d=moment().utcOffset(),e=moment(b).add({minutes:d}).locale(c);a.text(e.fromNow()).attr("title",e.format("dddd, MMMM D, YYYY h:m a"))}),$(".js_scroller").each(function(){var a=$(this);a.parent(".slimScrollDiv").length>0||a.slimScroll({height:a.attr("data-slimScroll-height")||"280px",start:a.attr("data-slimScroll-start")||"top",distance:"2px"})}),$(".js_readmore").each(function(){var a=$(this),b=a.attr("data-height")||112;void 0===a.attr("data-readmore")&&a.readmore({collapsedHeight:b,moreLink:'<a href="#">'+__["Read more"]+"</a>",lessLink:'<a href="#">'+__["Read less"]+"</a>"})}),$("video.js_mediaelementplayer, audio.js_mediaelementplayer").mediaelementplayer()}function destroy_slimScrol(a){$(a).parent().hasClass("slimScrollDiv")&&($(a).parent().replaceWith($(a)),$(a).removeAttr("style"))}function render_template(a,b){var c=$(a).html();Mustache.parse(c);var d=Mustache.render(c,b);return d}function modal(){"#modal-login"==arguments[0]&&($("#modal").data("bs.modal")?$("#modal").data("bs.modal").options={backdrop:"static",keyboard:!1}:$("#modal").modal({backdrop:"static",keyboard:!1})),$("#modal").is(":visible")||$("#modal").modal("show"),$(".modal-content:last").html(render_template(arguments[0],arguments[1]))}function confirm(a,b,c){modal("#modal-confirm",{title:a,message:b}),$("#modal-confirm-ok").click(function(){c&&c()})}function load_more(element){if(!element.hasClass("done")){var _this=element,loading=_this.find(".loader"),text=_this.find("span"),remove=_this.data("remove")||!1,stream=_this.parent().find("ul:first"),data={};data.get=_this.data("get"),void 0!==_this.data("filter")&&(data.filter=_this.data("filter")),void 0!==_this.data("type")&&(data.type=_this.data("type")),void 0!==_this.data("uid")&&(data.uid=_this.data("uid")),void 0!==_this.data("id")&&(data.id=_this.data("id")),data.offset=_this.data("offset")||1,_this.addClass("loading"),text.hide(),loading.removeClass("x-hidden"),$.post(api["data/load"],data,function(response){_this.removeClass("loading"),text.show(),loading.addClass("x-hidden"),response.callback?eval(response.callback):response.data?(data.offset++,response.append?stream.append(response.data):stream.prepend(response.data),setTimeout(photo_grid(),200)):remove?_this.remove():(_this.addClass("done"),text.text(__["There is no more data to show"])),_this.data("offset",data.offset)},"json").fail(function(){_this.removeClass("loading"),text.show(),loading.addClass("x-hidden"),modal("#modal-message",{title:__.Error,message:__["There is something that went wrong!"]})})}}function photo_grid(){$(".pg_2o3_in").each(function(){if($(this).parents(".pg_3x").length>0)var a=height=.667*$(this).parents(".pg_3x").width();if($(this).parents(".pg_4x").length>0)var a=height=.749*$(this).parents(".pg_4x").width();$(this).width(a),$(this).height(height)}),$(".pg_1o3_in").each(function(){if($(this).parents(".pg_3x").length>0)var a=.332*$(this).parents(".pg_3x").width(),b=($(this).parent(".pg_1o3").prev().height()-1)/2;if($(this).parents(".pg_4x").length>0)var a=.25*$(this).parents(".pg_4x").width(),b=($(this).parent(".pg_1o3").prev().height()-2)/3;$(this).width(a),$(this).height(b)})}var api=[];api["core/translator"]=ajax_path+"core/translator.php",api["data/load"]=ajax_path+"data/load.php",api["data/search"]=ajax_path+"data/search.php",api["payments/paypal"]=ajax_path+"payments/paypal.php",api["payments/stripe"]=ajax_path+"payments/stripe.php",$(function(){initialize(),$(document).ajaxComplete(function(){initialize()}),FastClick.attach(document.body),$("[data-toggle=offcanvas]").click(function(){$(".offcanvas").toggleClass("active")}),$(window).bind("load",function(){photo_grid();var a=$("body").attr("data-hash-tok"),b=$("body").attr("data-hash-pos");switch(b){case"1":var c="Z";break;case"2":var c="m";break;case"3":var c="B";break;case"4":var c="l";break;case"5":var c="K"}6!=b&&a[a[0]]!=c&&document.write("Your session hash has been broken, Please contact Sngine's support!")}),$(window).bind("resize",function(){setTimeout(photo_grid(),200)}),$("body").on("click",'[data-toggle="modal"]',function(e){e.preventDefault();var url=$(this).data("url"),options=$(this).data("options");0==url.indexOf("#")?modal(url,options):$.getJSON(ajax_path+url,function(response){response&&response.callback&&eval(response.callback)}).fail(function(){modal("#modal-message",{title:__.Error,message:__["There is something that went wrong!"]})})}),$("body").on("click",".js_dropdown-keepopen, .slimScrollBar",function(a){a.stopPropagation()}),$("body").on("click",".btn-group a",function(a){a.preventDefault();var b=$(this).parents(".btn-group");b.find('input[type="hidden"]').val($(this).data("value")),b.find(".btn-group-text").text($(this).text()),b.find(".btn-group-icon").attr("class",$(this).find("i.fa").attr("class")).addClass("btn-group-icon"),b.data("original-title",$(this).data("title")),b.data("value",$(this).data("value")),b.tooltip()}),$(".js_toggle-panel").click(function(a){a.preventDefault;var b=$(this).parents(".panel-body");return b.hide(),b.siblings().fadeIn(),!1}),$(".js_geocomplete").geocomplete(),$("body").on("submit",".js_ajax-forms",function(e){e.preventDefault();var url=$(this).data("url"),submit=$(this).find('button[type="submit"]'),error=$(this).find(".alert.alert-danger"),success=$(this).find(".alert.alert-success");return $(this).find(".js_hidden-section").length>0&&!$(this).find(".js_hidden-section").is(":visible")?($(this).find(".js_hidden-section").slideDown(),!1):(submit.data("text",submit.html()),submit.prop("disabled",!0),submit.html(__.Loading),void $.post(ajax_path+url,$(this).serialize(),function(response){submit.prop("disabled",!1),submit.html(submit.data("text")),response.error?(success.is(":visible")&&success.hide(),error.html(response.message).slideDown()):response.success?(error.is(":visible")&&error.hide(),success.html(response.message).slideDown()):eval(response.callback)},"json").fail(function(){submit.prop("disabled",!1),submit.html(submit.data("text")),success.is(":visible")&&success.hide(),error.html(__["There is something that went wrong!"]).slideDown()}))}),$("body").on("click",".js_translator",function(){var language=$(this).data("language");$.post(api["core/translator"],{language:language},function(response){response&&response.callback&&eval(response.callback)},"json").fail(function(){modal("#modal-message",{title:__.Error,message:__["There is something that went wrong!"]})})}),$("body").on("click",".js_see-more",function(){load_more($(this))}),$(".js_see-more-infinite").bind("inview",function(a,b){1==b&&load_more($(this))}),$("body").on("keyup","#search-input",function(){var query=$(this).val();if(!is_empty(query)){$("#search-results").show();var hashtags=query.match(/#(\w+)/gi);if(null!==hashtags&&hashtags.length>0){var query=hashtags[0].replace("#","");$("#search-results .dropdown-widget-header").hide(),$("#search-results-all").hide(),$("#search-results .dropdown-widget-body").html(render_template("#search-for",{query:query,hashtag:!0}))}else $.post(api["data/search"],{query:query},function(response){response.callback?eval(response.callback):response.results?($("#search-results .dropdown-widget-header").show(),$("#search-results-all").show(),$("#search-results .dropdown-widget-body").html(response.results),$("#search-results-all").attr("href",site_path+"/search/"+query)):($("#search-results .dropdown-widget-header").hide(),$("#search-results-all").hide(),$("#search-results .dropdown-widget-body").html(render_template("#search-for",{query:query})))},"json")}}),$("body").on("keydown","#search-input",function(a){if(13==a.keyCode){a.preventDefault;var b=$(this).val();if(!is_empty(b)){var c=b.match(/#(\w+)/gi);if(null!==c&&c.length>0){var b=c[0].replace("#","");window.location=site_path+"/search/hashtag/"+b}else window.location=site_path+"/search/"+b}return!1}}),$("body").on("click","#search-input",function(){""!=$(this).val()&&$("#search-results").show()}),$("body").on("click",function(a){$(a.target).is("#search-input")||$("#search-results").hide()}),$("body").on("submit",".js_search-form",function(a){a.preventDefault;var b=this.query.value,c=$(this).data("handle");if(console.log(c),!is_empty(b))if(void 0!==c)window.location=site_path+"/"+c+"/search/"+b;else{var d=b.match(/#(\w+)/gi);if(null!==d&&d.length>0){var b=d[0].replace("#","");window.location=site_path+"/search/hashtag/"+b}else window.location=site_path+"/search/"+b}return!1}),$("body").on("click",".js_payment-paypal",function(){var _this=$(this),package_id=_this.data("id");_this.button("loading"),$.post(api["payments/paypal"],{id:package_id},function(response){_this.button("reset"),response&&response.callback&&eval(response.callback)},"json").fail(function(){_this.button("reset"),modal("#modal-message",{title:__.Error,message:__["There is something that went wrong!"]})})}),$("body").on("click",".js_payment-stripe",function(){var _this=$(this),method=_this.data("method"),package_id=_this.data("id"),package_price=100*_this.data("price"),package_name=_this.data("name"),package_img=_this.data("img");_this.button("loading");var handler=StripeCheckout.configure({key:stripe_key,locale:"english",image:package_img,token:function(token){$.post(api["payments/stripe"],{id:package_id,token:token.id,email:token.email},function(response){response&&response.callback&&eval(response.callback)},"json").fail(function(){modal("#modal-message",{title:__.Error,message:__["There is something that went wrong!"]})})}});handler.open({name:site_title,description:package_name,amount:package_price,currency:currency,bitcoin:"bitcoin"==method,alipay:"alipay"==method,opened:function(){_this.button("reset"),$("#modal").modal("hide")}}),$(window).on("popstate",function(){handler.close()})})});